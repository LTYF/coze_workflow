{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7561020164771676195","flowMode":0,"spaceId":"7491983279684534324","isDouyin":false,"host":"www.coze.cn"},"json":{"nodes":[{"id":"100001","type":"1","meta":{"position":{"x":-334.35431317683447,"y":-13}},"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"type":"string","name":"letter","required":true}],"trigger_parameters":[]},"_temp":{"bounds":{"x":-514.3543131768345,"y":-13,"width":360,"height":86},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","description":"工作流的起始节点，用于设定启动工作流需要的信息","title":"开始","mainColor":"#5C62FF"}}},{"id":"157919","type":"3","meta":{"position":{"x":241.88099522370203,"y":-52}},"data":{"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","mainColor":"#5C62FF","subTitle":"大模型","title":"大模型-分镜"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"letter"},"rawMeta":{"type":1}}}}],"llmParam":[{"name":"temperature","input":{"type":"float","value":{"type":"literal","content":"0.8","rawMeta":{"type":4}}}},{"name":"maxTokens","input":{"type":"integer","value":{"type":"literal","content":"2200","rawMeta":{"type":2}}}},{"name":"spCurrentTime","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"spAntiLeak","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"thinkingType","input":{"type":"string","value":{"type":"literal","content":"enabled","rawMeta":{"type":1}}}},{"name":"responseFormat","input":{"type":"integer","value":{"type":"literal","content":"2","rawMeta":{"type":2}}}},{"name":"modleName","input":{"type":"string","value":{"type":"literal","content":"DeepSeek-V3.1","rawMeta":{"type":1}}}},{"name":"modelType","input":{"type":"integer","value":{"type":"literal","content":"1755855875","rawMeta":{"type":2}}}},{"name":"generationDiversity","input":{"type":"string","value":{"type":"literal","content":"balance","rawMeta":{"type":1}}}},{"name":"prompt","input":{"type":"string","value":{"type":"literal","content":"{{input}}","rawMeta":{"type":1}}}},{"name":"enableChatHistory","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"chatHistoryRound","input":{"type":"integer","value":{"type":"literal","content":"3","rawMeta":{"type":2}}}},{"name":"systemPrompt","input":{"type":"string","value":{"type":"literal","content":"# 角色\n你是一位广受赞誉且极具耐心的英文字母拼读绘本创作大师，在英语教育领域拥有多年的深入经验。凭借深厚的英语知识储备，你以生动有趣、充满童趣的方式传授英语知识，深受小朋友们的喜爱以及家长们的信赖。你尤其擅长根据用户输入的英文字母，创作出丰富实用且易于理解的英文单词及句子，帮助用户轻松高效地学习英语。\n\n## 技能\n### 技能 1: 判断输入\n当接收到用户输入{{input}}时，要认真且准确地判断输入内容是否为英文字母。若不是英文字母，需用亲切友好、清晰易懂的语言，如“亲爱的小朋友，麻烦你输入英文字母哦，这样我们就能一起开启有趣的英语学习之旅啦！”提示用户输入英文字母。\n\n### 技能 2: 生成绘本首镜\n1. 根据用户输入的字母，生成详细的绘画提示词desc_promopt。绘画内容要生动展示字母的大写和小写，注重场景布置、色彩风格等细节。\n    - 风格要求：绘画提示词的画面需色彩鲜艳活泼、明亮动人，充满童趣，造型可爱讨喜、富有生机，线条简洁明快、流畅自然，构建完整场景，采用中景或全景展示。画面中可融入与该字母发音或形象相关的可爱元素，以增强趣味性。画面的色彩搭配要丰富且协调，避免色彩过于浓烈或刺眼，确保小朋友观看时感到舒适和愉悦。场景布置要符合儿童认知特点，例如可以是温馨的教室、有趣的公园等。\n2. 将生成的结果整理成 Json 格式输出，格式为{\"word\":\"英文字母\",\"desc\":\"The letter A\",\"desc_promopt\":\"步骤1生成的绘画提示词\",\"doggerel\":\"The letter A\"}。\n\n### 技能 3: 生成英文单词和描述\n1. 若用户输入的是英文字母，围绕该字母，精心挑选四到五个以该字母开头、小朋友日常生活中常见且易于理解的英文单词。\n2. 根据用户输入的字母，生成详细的绘画提示词desc_promopt。绘画内容要生动展现字母的大写和小写，注重场景布置、色彩风格等细节。\n    - 风格要求：绘画提示词的画面需色彩鲜艳活泼、明亮动人，充满童趣，造型可爱讨喜、富有生机，线条简洁明快、流畅自然，构建完整场景，采用中景或全景展示。画面中可融入与该字母发音或形象相关的可爱元素，增强趣味性。画面的色彩搭配要丰富且协调，避免色彩过于浓烈或刺眼，确保小朋友观看时感到舒适和愉悦。场景布置要符合儿童认知特点，例如可以是温馨的教室、有趣的公园等。\n3. 根据单词输出与单词有关的描述句子desc。例如，单词为“apple”，句子可以是“Apple is red”。\n4. 根据单词输出与单词有关的的顺口溜doggerel。例如，单词为“apple”，顺口溜可以是“A is for apple”\n5. 将生成的结果整理成 Json 格式输出，例如{\"word\":\"英文单词\",\"desc\":\"英文句子\",\"desc_promopt\":\"绘画提示词\",\"doggerel\":\"顺口溜\"}。\n\n## 限制:\n- 仅处理与英文字母相关的输入内容，若输入非英文字母，仅按要求友好提示用户重新输入。\n- 生成的句子必须以英文字母开头的英文单词为核心。\n- 所选用的英文单词要符合小朋友日常生活认知，避免生僻词汇。 ","rawMeta":{"type":1}}}},{"name":"stableSystemPrompt","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"canContinue","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"loopPromptVersion","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptName","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptId","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}}],"fcParamVar":{"knowledgeFCParam":{}},"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"list","name":"scenes","schema":{"type":"object","schema":[{"type":"string","name":"word"},{"type":"string","name":"desc"},{"type":"string","name":"desc_prompt"},{"type":"string","name":"doggerel"}]}},{"type":"string","name":"reasoning_content"}],"version":"3"},"_temp":{"bounds":{"x":61.88099522370203,"y":-52,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","description":"调用大语言模型,使用变量和提示词生成回复","title":"大模型","mainColor":"#5C62FF"}}},{"id":"121555","type":"28","meta":{"position":{"x":1342.7347326449476,"y":-21.90678433567009},"canvasPosition":{"x":581.4537917718706,"y":405.799277701828}},"data":{"inputs":{"batchSize":{"type":"integer","value":{"type":"literal","content":100,"rawMeta":{"type":2}}},"concurrentSize":{"type":"integer","value":{"type":"literal","content":3,"rawMeta":{"type":2}}},"inputParameters":[{"name":"scenes","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"word"},{"type":"string","name":"desc"},{"type":"string","name":"desc_prompt"},{"type":"string","name":"doggerel"}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"157919","name":"scenes"},"rawMeta":{"type":103}}}}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理_生成图片"},"outputs":[{"name":"image_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"187299","name":"image_url"},"rawMeta":{"type":1}}}},{"name":"desc_link_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"182040","name":"data.link"},"rawMeta":{"type":1}}}},{"name":"desc_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"158063","name":"duration"},"rawMeta":{"type":2}}}},{"name":"text_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"187299","name":"text"},"rawMeta":{"type":1}}}},{"name":"word_link_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"1211031","name":"data.link"},"rawMeta":{"type":1}}}},{"name":"word_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"1707069","name":"duration"},"rawMeta":{"type":2}}}},{"name":"doggerel_link_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"1491996","name":"data.link"},"rawMeta":{"type":1}}}},{"name":"doggerel_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"1354166","name":"duration"},"rawMeta":{"type":2}}}}]},"blocks":[{"id":"131139","type":"16","meta":{"position":{"x":-158.61965605279613,"y":45.35000000000007}},"data":{"inputs":{"apiParam":null,"inputParameters":[{"name":"desc_prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc_prompt"},"rawMeta":{"type":1}}}}],"modelSetting":{"custom_ratio":{"height":768,"ratio_type":"fixed","width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"卡通可爱插画风格：{{desc_prompt}}"},"references":[],"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"图像生成","title":"图像生成"},"outputs":[{"type":"string","assistType":2,"name":"data","required":false},{"type":"string","name":"msg","required":false}],"settingOnError":{"settingOnErrorIsOpen":false,"processType":1,"timeoutMs":60000,"retryTimes":0},"settings":null,"version":""},"_temp":{"bounds":{"x":242.83413571907442,"y":451.14927770182805,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","description":"通过文字描述/添加参考图生成图片","title":"图像生成","mainColor":"#FF4DC3"}}},{"id":"187299","type":"5","meta":{"position":{"x":1681.1815377989503,"y":71.20000000000005}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_结果合并"},"inputs":{"inputParameters":[{"name":"image1","input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"131139","name":"data"},"rawMeta":{"type":7}}}},{"name":"image2","input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"1667619","name":"data"},"rawMeta":{"type":7}}}},{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc"},"rawMeta":{"type":1}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n    var image1 = params.image1;\n    var image2 = params.image2;\n    if(!image1){\n        image1 = image2;\n    }\n\n\n\n    // 构建输出对象\n    const ret = {\n        \"image_url\":  image1,\n        \"text\": params.text\n    };\n\n    return ret;\n}","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"image_url"},{"type":"string","name":"text"}],"version":"v2"},"_temp":{"bounds":{"x":2082.635329570821,"y":476.999277701828,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"182040","type":"4","meta":{"position":{"x":-158.61965605279622,"y":322.1732977798865}},"data":{"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_desc"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc"},"rawMeta":{"type":1}}}},{"name":"speed_ratio","input":{"type":"float","value":{"type":"literal","content":1,"rawMeta":{"type":4}}}},{"name":"voice_id","input":{"type":"string","assistType":12,"value":{"type":"literal","content":"7481299960428789799","rawMeta":{"fileName":"活力女声-Ariana","type":18}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"log_id","required":false},{"type":"string","name":"msg","required":false},{"type":"float","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"float","name":"duration","required":false,"description":"音频时长，单位是s"},{"type":"string","name":"link","required":false}],"required":false}]},"_temp":{"bounds":{"x":242.8341357190743,"y":727.9725754817146,"width":360,"height":136},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1729153029627658847_7vpeyBUsGn.jpeg?lk3s=cd508e2b&x-expires=1764125345&x-signature=xO%2FipLN7tKD67cIUUw2b0T6wsYE%3D","apiName":"speech_synthesis","pluginID":"7426655854067351562","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://www.coze.cn/open/docs/guides/text_to_speech_plugin, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"扣子音色 ID，支持选择扣子系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看音色 ID。","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音情感","input":{},"name":"emotion","required":false,"type":"string"},{"defaultValue":3,"description":"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。","input":{},"name":"emotion_scale","required":false,"type":"float"},{"description":"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看各音色支持的语种。","input":{},"name":"language","required":false,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":[{"description":"音频时长，单位是s","input":{},"name":"duration","required":false,"type":"float"},{"input":{},"name":"link","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"log_id","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"code","required":false,"type":"float"}],"updateTime":1761532043,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://www.coze.cn/open/docs/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。","title":"speech_synthesis","mainColor":"#CA61FF"}}},{"id":"158063","type":"4","meta":{"position":{"x":350.71850517440294,"y":334.1732977798865}},"data":{"nodeMeta":{"description":"获取音频时长（微秒）","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758077933&x-signature=llFA%2Ba6ed6Tg%2BfbPGMN2lCB2DHA%3D","subtitle":"剪映草稿数据生成工具:get_audio_duration","title":"get_audio_duration_desc"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989256854372386","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"182040","name":"data.link"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"duration","required":true,"description":"时长（微秒）"}]},"_temp":{"bounds":{"x":752.1722969462735,"y":739.9725754817146,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=eRVGEoDvpw9TQ6mrHD%2FGLNVtMi4%3D","apiName":"get_audio_duration","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频地址","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"时长（微秒）","input":{},"name":"duration","required":true,"type":"integer"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"获取音频时长（微秒）","title":"get_audio_duration","mainColor":"#CA61FF"}}},{"id":"1211031","type":"4","meta":{"position":{"x":-158.61965605279624,"y":608.4232977798865}},"data":{"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_word"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.word"},"rawMeta":{"type":1}}}},{"name":"speed_ratio","input":{"type":"float","value":{"type":"literal","content":1,"rawMeta":{"type":4}}}},{"name":"voice_id","input":{"type":"string","assistType":12,"value":{"type":"literal","content":"7481299960428789799","rawMeta":{"fileName":"活力女声-Ariana","type":18}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"log_id","required":false},{"type":"string","name":"msg","required":false},{"type":"float","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"float","name":"duration","required":false,"description":"音频时长，单位是s"},{"type":"string","name":"link","required":false}],"required":false}]},"_temp":{"bounds":{"x":242.8341357190743,"y":1014.2225754817146,"width":360,"height":136},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1729153029627658847_7vpeyBUsGn.jpeg?lk3s=cd508e2b&x-expires=1764125345&x-signature=xO%2FipLN7tKD67cIUUw2b0T6wsYE%3D","apiName":"speech_synthesis","pluginID":"7426655854067351562","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://www.coze.cn/open/docs/guides/text_to_speech_plugin, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"扣子音色 ID，支持选择扣子系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看音色 ID。","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音情感","input":{},"name":"emotion","required":false,"type":"string"},{"defaultValue":3,"description":"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。","input":{},"name":"emotion_scale","required":false,"type":"float"},{"description":"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看各音色支持的语种。","input":{},"name":"language","required":false,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":[{"description":"音频时长，单位是s","input":{},"name":"duration","required":false,"type":"float"},{"input":{},"name":"link","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"log_id","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"code","required":false,"type":"float"}],"updateTime":1761532043,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://www.coze.cn/open/docs/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。","title":"speech_synthesis","mainColor":"#CA61FF"}}},{"id":"1707069","type":"4","meta":{"position":{"x":350.71850517440294,"y":620.4232977798865}},"data":{"nodeMeta":{"description":"获取音频时长（微秒）","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758077933&x-signature=llFA%2Ba6ed6Tg%2BfbPGMN2lCB2DHA%3D","subtitle":"剪映草稿数据生成工具:get_audio_duration","title":"get_audio_duration_word"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989256854372386","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1211031","name":"data.link"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"duration","required":true,"description":"时长（微秒）"}]},"_temp":{"bounds":{"x":752.1722969462735,"y":1026.2225754817146,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=eRVGEoDvpw9TQ6mrHD%2FGLNVtMi4%3D","apiName":"get_audio_duration","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频地址","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"时长（微秒）","input":{},"name":"duration","required":true,"type":"integer"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"获取音频时长（微秒）","title":"get_audio_duration","mainColor":"#CA61FF"}}},{"id":"1491996","type":"4","meta":{"position":{"x":-158.61965605279624,"y":806.0473924590339}},"data":{"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_doggerel"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.doggerel"},"rawMeta":{"type":1}}}},{"name":"speed_ratio","input":{"type":"float","value":{"type":"literal","content":1,"rawMeta":{"type":4}}}},{"name":"voice_id","input":{"type":"string","assistType":12,"value":{"type":"literal","content":"7481299960428789799","rawMeta":{"fileName":"活力女声-Ariana","type":18}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"log_id","required":false},{"type":"string","name":"msg","required":false},{"type":"float","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"float","name":"duration","required":false,"description":"音频时长，单位是s"},{"type":"string","name":"link","required":false}],"required":false}]},"_temp":{"bounds":{"x":242.8341357190743,"y":1211.8466701608618,"width":360,"height":136},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1729153029627658847_7vpeyBUsGn.jpeg?lk3s=cd508e2b&x-expires=1764125345&x-signature=xO%2FipLN7tKD67cIUUw2b0T6wsYE%3D","apiName":"speech_synthesis","pluginID":"7426655854067351562","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://www.coze.cn/open/docs/guides/text_to_speech_plugin, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"扣子音色 ID，支持选择扣子系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看音色 ID。","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音情感","input":{},"name":"emotion","required":false,"type":"string"},{"defaultValue":3,"description":"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。","input":{},"name":"emotion_scale","required":false,"type":"float"},{"description":"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看各音色支持的语种。","input":{},"name":"language","required":false,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":[{"description":"音频时长，单位是s","input":{},"name":"duration","required":false,"type":"float"},{"input":{},"name":"link","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"log_id","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"code","required":false,"type":"float"}],"updateTime":1761532043,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://www.coze.cn/open/docs/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。","title":"speech_synthesis","mainColor":"#CA61FF"}}},{"id":"1354166","type":"4","meta":{"position":{"x":350.71850517440294,"y":818.047392459034}},"data":{"nodeMeta":{"description":"获取音频时长（微秒）","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758077933&x-signature=llFA%2Ba6ed6Tg%2BfbPGMN2lCB2DHA%3D","subtitle":"剪映草稿数据生成工具:get_audio_duration","title":"get_audio_duration_doggerel"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989256854372386","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1491996","name":"data.link"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"duration","required":true,"description":"时长（微秒）"}]},"_temp":{"bounds":{"x":752.1722969462735,"y":1223.846670160862,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=eRVGEoDvpw9TQ6mrHD%2FGLNVtMi4%3D","apiName":"get_audio_duration","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频地址","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"时长（微秒）","input":{},"name":"duration","required":true,"type":"integer"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"获取音频时长（微秒）","title":"get_audio_duration","mainColor":"#CA61FF"}}},{"id":"133787","type":"8","meta":{"position":{"x":321.4466939355177,"y":58.35}},"data":{"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器"},"inputs":{"branches":[{"condition":{"logic":2,"conditions":[{"operator":10,"left":{"input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"131139","name":"data"},"rawMeta":{"type":7}}}}}]}}]}},"_temp":{"bounds":{"x":722.9004857073883,"y":464.149277701828,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","title":"选择器","mainColor":"#00B2B2"}}},{"id":"1667619","type":"16","meta":{"position":{"x":1209.160301322256,"y":171.74999999999997}},"data":{"inputs":{"apiParam":null,"inputParameters":[{"name":"desc_prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"109484","name":"data"},"rawMeta":{"type":1}}}}],"modelSetting":{"custom_ratio":{"height":768,"ratio_type":"fixed","width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{desc_prompt}}"},"references":[],"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"图像生成","title":"图像生成_补图"},"outputs":[{"type":"string","assistType":2,"name":"data","required":false},{"type":"string","name":"msg","required":false}],"settingOnError":{"settingOnErrorIsOpen":false,"processType":1,"timeoutMs":60000,"retryTimes":0},"settings":null,"version":""},"_temp":{"bounds":{"x":1610.6140930941265,"y":577.5492777018279,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","description":"通过文字描述/添加参考图生成图片","title":"图像生成","mainColor":"#FF4DC3"}}},{"id":"109484","type":"4","meta":{"position":{"x":758.8720501986647,"y":197.75}},"data":{"nodeMeta":{"description":"智能优化图像提示词","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-better_prompt-v2.jpg","subtitle":"提示词优化:sd_better_prompt","title":"sd_better_prompt"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7439197952104726528","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"sd_better_prompt","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7439197952104710144","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"提示词优化","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc_prompt"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"data","required":false},{"type":"string","name":"msg","required":false}]},"_temp":{"bounds":{"x":1160.3258419705353,"y":603.549277701828,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1682717607724762_1737442044729286337_eWiqvwPv2g.jpg?lk3s=cd508e2b&x-expires=1764125344&x-signature=zKmh%2BiNTKFE%2Fw94RwLWLo0RnQU4%3D","apiName":"sd_better_prompt","pluginID":"7439197952104710144","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7352795533666664448","inputs":[{"description":"prompt","input":{},"name":"prompt","required":true,"title":"提示词","type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"updateTime":1761532068,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"智能优化图像提示词","title":"sd_better_prompt","mainColor":"#CA61FF"}}}],"edges":[{"sourceNodeID":"121555","targetNodeID":"131139","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"131139","targetNodeID":"133787"},{"sourceNodeID":"1667619","targetNodeID":"187299"},{"sourceNodeID":"133787","targetNodeID":"187299","sourcePortID":"true"},{"sourceNodeID":"187299","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"121555","targetNodeID":"182040","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"182040","targetNodeID":"158063"},{"sourceNodeID":"158063","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"121555","targetNodeID":"1211031","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"1211031","targetNodeID":"1707069"},{"sourceNodeID":"1707069","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"121555","targetNodeID":"1491996","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"1491996","targetNodeID":"1354166"},{"sourceNodeID":"1354166","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"133787","targetNodeID":"109484","sourcePortID":"false"},{"sourceNodeID":"109484","targetNodeID":"1667619"}],"_temp":{"bounds":{"x":1162.7347326449476,"y":-21.90678433567009,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","title":"批处理","mainColor":"#00B2B2"}}},{"id":"163547","type":"5","meta":{"position":{"x":2275.644294548637,"y":-21.90678433567009}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_视频组装"},"inputs":{"inputParameters":[{"name":"desc_audio_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"desc_link_list"},"rawMeta":{"type":99}}}},{"name":"desc_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"desc_duration_list"},"rawMeta":{"type":100}}}},{"name":"text_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"text_list"},"rawMeta":{"type":99}}}},{"name":"word_audio_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"word_link_list"},"rawMeta":{"type":99}}}},{"name":"word_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"word_duration_list"},"rawMeta":{"type":100}}}},{"name":"doggerel_audio_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"doggerel_link_list"},"rawMeta":{"type":99}}}},{"name":"doggerel_duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"doggerel_duration_list"},"rawMeta":{"type":100}}}},{"name":"image_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"image_list"},"rawMeta":{"type":99}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    const { image_list, desc_audio_list, desc_duration_list, word_audio_list, word_duration_list, doggerel_audio_list, doggerel_duration_list, text_list } = params;\n\n    const space_time = 100000;\n    const video_time = 10000000;\n    // 处理音频数据\n    const audioData = [];\n    let audioStartTime = 0;\n    let maxDuration = 0;\n\n    const durationList = [];\n    const textTimeLines = [];\n    const textList = [];\n\n    const imageData = [];\n    \n    \n    for (let i = 0; i < desc_audio_list.length && i < desc_duration_list.length; i++) {\n        const desc_duration = desc_duration_list[i];\n        const word_duration = word_duration_list[i];\n        const doggerel_duration = doggerel_duration_list[i];\n        let word_time = space_time * 2;\n        if(doggerel_audio_list[i]){\n            if(word_audio_list[i]){\n                word_time += space_time;\n            }\n            audioData.push({\n                url: doggerel_audio_list[i],\n                duration:doggerel_duration,\n                start: audioStartTime + word_time,\n                end: audioStartTime + word_time + doggerel_duration\n            });\n            word_time += space_time * 2 + doggerel_duration;\n        }\n        if(i>0){\n            for(var j=0;j<2;j++){\n                for(var k=0;k<3;k++){\n                    if(word_audio_list[i]){\n                        audioData.push({\n                            url: word_audio_list[i],\n                            duration:word_duration,\n                            start: audioStartTime + word_time,\n                            end: audioStartTime + word_time + word_duration\n                        });\n                        word_time += space_time + word_duration;\n                    }\n                }\n                if(desc_audio_list[i]){\n                    if(desc_audio_list[i]){\n                        word_time += space_time;\n                    }\n                    audioData.push({\n                        url: desc_audio_list[i],\n                        duration:desc_duration,\n                        start: audioStartTime + word_time,\n                        end: audioStartTime + word_time + desc_duration\n                    });\n                    word_time += space_time * 2 + desc_duration;\n                }\n            }\n        }    \n        if((i-1)%2==0){\n            imageData.push({\n                url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + word_time,\n                width: 1440,\n                height: 1080,\n                in_animation: \"轻微放大\",\n                in_animation_duration: 100000\n            });\n        } else{\n            imageData.push({\n                url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + word_time,\n                width: 1440,\n                height: 1080\n            });\n        }\n        \n        textList.push(text_list[i].replace('.',''));\n        textTimeLines.push({\n            start: audioStartTime,\n            end: audioStartTime + word_time\n        });\n        durationList.push(word_time);\n        audioStartTime += word_time;\n        maxDuration = audioStartTime;\n    }\n\n\n\n\n    \n    // 构建输出对象\n    const ret = {\n        \"audioData\": JSON.stringify(audioData),\n        \"imageData\": JSON.stringify(imageData),\n        \"durationList\":durationList,\n        \"textTimeLines\":textTimeLines,\n        \"textList\":textList\n    };\n\n    return ret;\n}\n\n\n\n","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"audioData"},{"type":"string","name":"imageData"},{"type":"list","name":"durationList","schema":{"type":"integer"}},{"type":"list","name":"textTimeLines","schema":{"type":"object","schema":[]}},{"type":"list","name":"textList","schema":{"type":"string"}}],"version":"v2"},"_temp":{"bounds":{"x":2095.644294548637,"y":-21.90678433567009,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"107619","type":"4","meta":{"position":{"x":2859.3340030035356,"y":-21.90678433567009}},"data":{"nodeMeta":{"description":"创建草稿","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:create_draft","title":"创建草稿"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942484017202","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"height","input":{"type":"integer","value":{"type":"literal","content":768,"rawMeta":{"type":2}}}},{"name":"width","input":{"type":"integer","value":{"type":"literal","content":1024,"rawMeta":{"type":2}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"}]},"_temp":{"bounds":{"x":2679.3340030035356,"y":-21.90678433567009,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=V%2F2ahHrUxDUI%2BbdLfSryAcwyvsw%3D","apiName":"create_draft","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"高度","input":{},"name":"height","required":true,"type":"integer"},{"description":"宽度","input":{},"name":"width","required":true,"type":"integer"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"创建草稿","title":"create_draft","mainColor":"#CA61FF"}}},{"id":"106125","type":"4","meta":{"position":{"x":2859.3340030035356,"y":281.38451433700857}},"data":{"nodeMeta":{"description":"批量添加音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_audios","title":"添加字幕音频"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483935282","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"163547","name":"audioData"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":2679.3340030035356,"y":281.38451433700857,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=TK0UkogNKVAWiGAaVTFUywabefE%3D","apiName":"add_audios","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加音频","title":"add_audios","mainColor":"#CA61FF"}}},{"id":"164177","type":"4","meta":{"position":{"x":2870.8258233199954,"y":537.2970658995735}},"data":{"nodeMeta":{"description":"批量添加图片","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_images","title":"添加分镜图片"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483951666","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"163547","name":"imageData"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"list","name":"segment_infos","schema":{"type":"object","schema":[{"type":"integer","name":"end","required":false,"description":"结束时间点（微秒）"},{"type":"string","name":"id","required":false,"description":"ID"},{"type":"integer","name":"start","required":false,"description":"开始时间点（微秒）"}]},"required":false,"description":"片段信息列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":2690.8258233199954,"y":537.2970658995735,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=CjEpuG6ER0Oli5O7H3IRctAjPe8%3D","apiName":"add_images","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"图片信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度，即在画布底部","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"}],"outputs":[{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段信息列表","input":{},"name":"segment_infos","required":false,"schema":{"schema":[{"description":"ID","input":{},"name":"id","required":false,"type":"string"},{"description":"开始时间点（微秒）","input":{},"name":"start","required":false,"type":"integer"},{"description":"结束时间点（微秒）","input":{},"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"},{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加图片","title":"add_images","mainColor":"#CA61FF"}}},{"id":"169807","type":"15","meta":{"position":{"x":3561.492797714357,"y":1044.0311124586265}},"data":{"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"生成下载地址"},"inputs":{"method":"concat","inputParameters":[{"name":"String1","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}}],"concatParams":[{"name":"concatResult","input":{"type":"string","value":{"type":"literal","content":"https://cdn-rd-aiqnwmini.vas.lutongnet.com/aiqnwmini/download-draft/index.html?draftId={{String1}}","rawMeta":{"type":1}}}},{"name":"arrayItemConcatChar","input":{"type":"string","value":{"type":"literal","content":"，","rawMeta":{"type":1}}}},{"name":"allArrayItemConcatChars","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"label","required":true},{"type":"string","name":"value","required":true},{"type":"boolean","name":"isDefault","required":true}]},"value":{"type":"literal","content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}]}}}]},"outputs":[{"type":"string","name":"output","required":true}]},"_temp":{"bounds":{"x":3381.492797714357,"y":1044.0311124586265,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","description":"用于处理多个字符串类型变量的格式","title":"文本处理","mainColor":"#3071F2"}}},{"id":"175385","type":"4","meta":{"position":{"x":2870.8258233199954,"y":823.497973931345}},"data":{"nodeMeta":{"description":"生成文本信息列表","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1757745478&x-signature=YdfU8PR%2FxGcysAJSPJiez1i0Yfg%3D","subtitle":"剪映草稿数据生成工具:text_infos","title":"字幕信息"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989259517493288","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"text_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"texts","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"163547","name":"textList"},"rawMeta":{"type":99}}}},{"name":"timelines","input":{"type":"list","schema":{"type":"object","schema":[]},"value":{"type":"ref","content":{"source":"block-output","blockID":"163547","name":"textTimeLines"},"rawMeta":{"type":103}}}},{"name":"border_color","input":{"type":"string","value":{"type":"literal","content":"#4a4238","rawMeta":{"type":1}}}},{"name":"color","input":{"type":"string","value":{"type":"literal","content":"#f2f2ed","rawMeta":{"type":1}}}},{"name":"font","input":{"type":"string","value":{"type":"literal","content":"兰亭圆","rawMeta":{"type":1}}}},{"name":"in_animation","input":{"type":"string","value":{"type":"literal","content":"随机飞入","rawMeta":{"type":1}}}},{"name":"in_animation_duration","input":{"type":"integer","value":{"type":"literal","content":2000000,"rawMeta":{"type":2}}}},{"name":"letter_spacing","input":{"type":"integer","value":{"type":"literal","content":8,"rawMeta":{"type":2}}}},{"name":"size","input":{"type":"integer","value":{"type":"literal","content":5,"rawMeta":{"type":2}}}},{"name":"transform_y","input":{"type":"integer","value":{"type":"literal","content":-520,"rawMeta":{"type":2}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"infos","required":true,"description":"文本信息列表，JSON数组格式字符串"}]},"_temp":{"bounds":{"x":2690.8258233199954,"y":823.497973931345,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=XrkxtSQcNkC950AUvHijke1wcwk%3D","apiName":"text_infos","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"时间线列表","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间点（微秒）","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间点（微秒）","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"描边透明度，0到1","input":{},"name":"border_alpha","required":false,"type":"float"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"字符间距","input":{},"name":"letter_spacing","required":false,"type":"integer"},{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"},{"description":"对齐方式，0/左对齐，1/居中，2/右对齐，默认为居中","input":{},"name":"align","required":false,"type":"integer"},{"description":"透明度，0到1","input":{},"name":"alpha","required":false,"type":"float"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"描边颜色，如#FFAACC","input":{},"name":"border_color","required":false,"type":"string"},{"description":"颜色，如#FFAABB","input":{},"name":"color","required":false,"type":"string"},{"description":"字体","input":{},"name":"font","required":false,"type":"string"},{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"行间距","input":{},"name":"line_spacing","required":false,"type":"integer"},{"description":"字号，默认为8","input":{},"name":"size","required":false,"type":"integer"}],"outputs":[{"description":"文本信息列表，JSON数组格式字符串","input":{},"name":"infos","required":true,"type":"string"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"生成文本信息列表","title":"text_infos","mainColor":"#CA61FF"}}},{"id":"900001","type":"2","meta":{"position":{"x":3561.492797714357,"y":1313.0313593149208}},"data":{"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"},"inputs":{"terminatePlan":"returnVariables","inputParameters":[{"name":"draft_url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"169807","name":"output"},"rawMeta":{"type":1}}}}]}},"_temp":{"bounds":{"x":3381.492797714357,"y":1313.0313593149208,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","description":"工作流的最终节点，用于返回工作流运行后的结果信息","title":"结束","mainColor":"#5C62FF"}}},{"id":"127991","type":"4","meta":{"position":{"x":2870.825823319995,"y":1120.5789935591438}},"data":{"nodeMeta":{"description":"批量添加文本","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/492553ac457b4e0b8bd88b9bde0e59e9~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1757745295&x-signature=6eDCERjMwgLhA3Hnr%2FjXbUzN69g%3D","subtitle":"剪映草稿文件夹小助手:add_texts","title":"添加字幕"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483984434","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_texts","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"175385","name":"infos"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":2690.825823319995,"y":1120.5789935591438,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=CjEpuG6ER0Oli5O7H3IRctAjPe8%3D","apiName":"add_texts","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文本信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度，即在画布底部","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"字体","input":{},"name":"font","required":false,"type":"string"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"行间距","input":{},"name":"line_spacing","required":false,"type":"integer"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"透明度，0到1","input":{},"name":"alpha","required":false,"type":"float"},{"description":"颜色，如#e70953","input":{},"name":"color","required":false,"type":"string"},{"description":"字符间距","input":{},"name":"letter_spacing","required":false,"type":"integer"},{"description":"字号，默认为8","input":{},"name":"size","required":false,"type":"integer"},{"description":"对齐方式，0/左对齐，1/居中，2/右对齐，默认为1","input":{},"name":"align","required":false,"type":"integer"},{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加文本","title":"add_texts","mainColor":"#CA61FF"}}},{"id":"167996","type":"4","meta":{"position":{"x":3561.492797714357,"y":750.582705595391}},"data":{"nodeMeta":{"description":"批量添加关键帧","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_keyframes","title":"添加关键帧"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483968050","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"120984","name":"keyFrames"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"}]},"_temp":{"bounds":{"x":3381.492797714357,"y":750.582705595391,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764125344&x-signature=QxMa5%2FjNg3CmvpP9rakYTanIrDY%3D","apiName":"add_keyframes","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"关键帧信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加关键帧","title":"add_keyframes","mainColor":"#CA61FF"}}},{"id":"120984","type":"5","meta":{"position":{"x":3561.492797714357,"y":468.7404670945241}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_关键帧"},"inputs":{"inputParameters":[{"name":"segment_ids","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"164177","name":"segment_ids"},"rawMeta":{"type":99}}}},{"name":"duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"163547","name":"durationList"},"rawMeta":{"type":100}}}}],"code":"import json\n\nasync def main(args: Args) -> Output:\n    params = args.params\n    segment_ids = params['segment_ids']\n    times = params['duration_list']\n    \n    space_time = 5000000;\n    \n    # 验证参数长度一致性\n    if len(segment_ids) != len(times):\n        raise ValueError(\"segment_ids与times数组长度不一致\")\n    \n    keyframes = []\n    \n    for idx, seg_id in enumerate(segment_ids):\n        \n        # 获取对应音频时长并转换微秒\n        audio_duration = int(float(times[idx]))\n        \n        # 根据循环索引决定缩放方向\n        if idx % 2 == 0:  # 偶数索引：1.0 -> 1.1\n            start_scale = 1.0\n            end_scale = 1.1\n        else:  # 奇数索引：1.1 -> 1.0\n            start_scale = 1.1\n            end_scale = 1.0\n        \n        key_duration = 0\n        while key_duration < audio_duration - space_time : \n\n            # 起始关键帧\n            keyframes.append({\n                \"time_offset\": key_duration, #0秒位置\n                \"property\": \"UNIFORM_SCALE\",\n                \"segment_id\": seg_id,\n                \"value\": start_scale,\n                \"easing\": \"linear\"\n            })\n            \n            key_duration += space_time\n\n            # 结束关键帧）\n            keyframes.append({\n                \"time_offset\": key_duration,  # 使用实际音频时长\n                \"property\": \"UNIFORM_SCALE\",\n                \"segment_id\": seg_id,\n                \"value\": end_scale,\n                \"easing\": \"linear\"\n            })\n\n            scale_temp = start_scale\n            start_scale = end_scale\n            end_scale = scale_temp\n        \n        # 起始关键帧\n        keyframes.append({\n            \"time_offset\": key_duration, #0秒位置\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": start_scale,\n            \"easing\": \"linear\"\n        })\n        \n        # 结束关键帧）\n        keyframes.append({\n            \"time_offset\": audio_duration,  # 使用实际音频时长\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": end_scale,\n            \"easing\": \"linear\"\n        })\n\n    return {\n        \"keyFrames\": json.dumps(keyframes)\n    }\n\n","language":3,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"keyFrames","required":false}]},"_temp":{"bounds":{"x":3381.492797714357,"y":468.7404670945241,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"149584","type":"31","meta":{"position":{"x":-394.35431317683447,"y":112}},"data":{"size":{"width":240,"height":150},"inputs":{"schemaType":"slate","note":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"输入英文字母，自动生成绘本视频\",\"type\":\"text\"}]}]"}},"_temp":{"bounds":{"x":-514.3543131768345,"y":112,"width":240,"height":150},"externalData":{"icon":"comment_icon","description":"comment_desc","title":"注释","mainColor":""}}}],"edges":[{"sourceNodeID":"100001","targetNodeID":"157919"},{"sourceNodeID":"157919","targetNodeID":"121555"},{"sourceNodeID":"121555","targetNodeID":"163547","sourcePortID":"batch-output"},{"sourceNodeID":"163547","targetNodeID":"107619"},{"sourceNodeID":"107619","targetNodeID":"106125"},{"sourceNodeID":"106125","targetNodeID":"164177"},{"sourceNodeID":"164177","targetNodeID":"175385"},{"sourceNodeID":"167996","targetNodeID":"169807"},{"sourceNodeID":"169807","targetNodeID":"900001"},{"sourceNodeID":"175385","targetNodeID":"127991"},{"sourceNodeID":"127991","targetNodeID":"120984"},{"sourceNodeID":"120984","targetNodeID":"167996"}]},"bounds":{"x":-514.3543131768345,"y":-52,"width":4255.847110891192,"height":1477.0313593149208}}